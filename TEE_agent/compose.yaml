services:
  mycontainer:
    build: ../agent
    image: "docker.io/arix666/sentinel:latest" # Always provide FQDN image names!
    platform: linux/amd64
    ports:
      - "3000:3000" # Expose Express API via ROFL Port Proxy
    volumes:
      - my-volume:/root/.my-volume # Persistent per-machine storage.
      - /run/rofl-appd.sock:/run/rofl-appd.sock # appd REST API.
    environment:
      # Keys & Identity
      - YELLOW_PRIVATE_KEY=${YELLOW_PRIVATE_KEY}
      - YELLOW_AGENT_ADDRESS=${YELLOW_AGENT_ADDRESS}
      - EXECUTOR_PRIVATE_KEY=${EXECUTOR_PRIVATE_KEY}
      - MNEMONIC=${MNEMONIC}
      - PRIVATE_KEY=${PRIVATE_KEY}
      # Alchemy RPC (Testnet)
      - ALCHEMY_RPC_URL=${ALCHEMY_RPC_URL}
      - ETHEREUM_SEPOLIA_RPC=${ETHEREUM_SEPOLIA_RPC}
      - BASE_SEPOLIA_RPC=${BASE_SEPOLIA_RPC}
      - ARBITRUM_SEPOLIA_RPC=${ARBITRUM_SEPOLIA_RPC}
      # Alchemy RPC (Mainnet)
      - ETHEREUM_RPC_URL=${ETHEREUM_RPC_URL}
      - BASE_RPC_URL=${BASE_RPC_URL}
      - ARBITRUM_RPC_URL=${ARBITRUM_RPC_URL}
      # Ankr RPC (Mainnet)
      - ANKR_ETHEREUM_RPC=${ANKR_ETHEREUM_RPC}
      - ANKR_BASE_RPC=${ANKR_BASE_RPC}
      - ANKR_ARBITRUM_RPC=${ANKR_ARBITRUM_RPC}
      # Ankr RPC (Testnet)
      - ANKR_ETHEREUM_SEPOLIA_RPC=${ANKR_ETHEREUM_SEPOLIA_RPC}
      - ANKR_BASE_SEPOLIA_RPC=${ANKR_BASE_SEPOLIA_RPC}
      - ANKR_ARBITRUM_SEPOLIA_RPC=${ANKR_ARBITRUM_SEPOLIA_RPC}
      # Scout Config
      - SCOUT_DEX_INTERVAL=${SCOUT_DEX_INTERVAL}
      - SCOUT_GAS_INTERVAL=${SCOUT_GAS_INTERVAL}
      # YellowOracle Contracts
      - YELLOW_ORACLE_ETHEREUM_SEPOLIA=${YELLOW_ORACLE_ETHEREUM_SEPOLIA}
      - YELLOW_ORACLE_BASE_SEPOLIA=${YELLOW_ORACLE_BASE_SEPOLIA}
      - YELLOW_ORACLE_ARBITRUM_SEPOLIA=${YELLOW_ORACLE_ARBITRUM_SEPOLIA}
      # SentinelHook Contracts
      - SENTINEL_HOOK_ETHEREUM_SEPOLIA=${SENTINEL_HOOK_ETHEREUM_SEPOLIA}
      - SENTINEL_HOOK_BASE_SEPOLIA=${SENTINEL_HOOK_BASE_SEPOLIA}
      - SENTINEL_HOOK_ARBITRUM_SEPOLIA=${SENTINEL_HOOK_ARBITRUM_SEPOLIA}
      # AgentRegistry Contracts
      - AGENT_REGISTRY_ETHEREUM_SEPOLIA=${AGENT_REGISTRY_ETHEREUM_SEPOLIA}
      - AGENT_REGISTRY_BASE_SEPOLIA=${AGENT_REGISTRY_BASE_SEPOLIA}
      - AGENT_REGISTRY_ARBITRUM_SEPOLIA=${AGENT_REGISTRY_ARBITRUM_SEPOLIA}
      # Pool Manager (Uniswap v4)
      - POOL_MANAGER_ETHEREUM_SEPOLIA=${POOL_MANAGER_ETHEREUM_SEPOLIA}
      - POOL_MANAGER_BASE_SEPOLIA=${POOL_MANAGER_BASE_SEPOLIA}
      - POOL_MANAGER_ARBITRUM_SEPOLIA=${POOL_MANAGER_ARBITRUM_SEPOLIA}
      # Yellow Network
      - YELLOW_ENDPOINT=${YELLOW_ENDPOINT}
      - YELLOW_NETWORK=${YELLOW_NETWORK}
      # TEE
      - TEE_ENABLED=${TEE_ENABLED}

volumes:
  my-volume:
